<%-include("header") %>




<style>
/* ===== GLOBAL ===== */
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins','Segoe UI',sans-serif;
}

body{
    background:linear-gradient(135deg,#eef2ff,#f8fafc);
    padding:40px 15px;
    animation: fadeBody 1s ease;
}

@keyframes fadeBody{
    from{opacity:0;}
    to{opacity:1;}
}

/* ===== CONTAINER ===== */
.order-container{
    max-width:1100px;
    margin:auto;
    background:#fff;
    border-radius:24px;
    box-shadow:0 40px 80px rgba(0,0,0,.15);
    overflow:hidden;
    animation: slideUp .8s ease;
    margin-bottom: 100px;
}

@keyframes slideUp{
    from{transform:translateY(40px); opacity:0;}
    to{transform:translateY(0); opacity:1;}
}

/* ===== HEADER ===== */
.order-header{
    background:linear-gradient(135deg,#4338ca,#6366f1);
    color:#fff;
    padding:35px;
    display:grid;
    grid-template-columns:1fr auto auto auto;
    gap:14px;
    align-items:center;
}

.order-header h2{
    font-size:30px;
    font-weight:600;
    letter-spacing:.5px;
}

.order-id{
    background:rgba(255,255,255,.2);
    padding:8px 16px;
    border-radius:22px;
    font-size:13px;
    backdrop-filter:blur(6px);
}

/* ===== TRACKER ===== */
.tracker{
    display:flex;
    align-items:center;
    padding:30px;
    background:#f1f5f9;
}

.step{
    flex:1;
    text-align:center;
    position:relative;
}

.circle{
    width:54px;
    height:54px;
    border-radius:50%;
    background:#c7d2fe;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:20px;
    font-weight:700;
    margin:auto;
    transition:.4s;
}

.step.completed .circle{
    background:linear-gradient(135deg,#22c55e,#16a34a);
    color:#fff;
    transform:scale(1.1);
}

.step p{
    margin-top:10px;
    font-size:14px;
    color:#334155;
    font-weight:500;
}

.line{
    height:5px;
    background:#c7d2fe;
    flex:1;
    margin:0 10px;
    border-radius:10px;
    overflow:hidden;
}

.line::after{
    content:'';
    display:block;
    height:100%;
    width:100%;
    background:linear-gradient(90deg,#22c55e,#16a34a);
    animation: progress 1.5s ease forwards;
}

@keyframes progress{
    from{transform:translateX(-100%);}
    to{transform:translateX(0);}
}

/* ===== SECTION ===== */
.order-section{
    padding:35px;
}

.order-section h3{
    font-size:22px;
    margin-bottom:20px;
    color:#0f172a;
}

/* ===== CUSTOMER INFO ===== */
.info-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
    gap:18px;
    background:linear-gradient(135deg,#eef2ff,#f8fafc);
    padding:24px;
    border-radius:20px;
}

.info-grid p{
    font-size:15px;
    color:#334155;
}

/* ===== PRODUCTS ===== */
.products{
    display:flex;
    flex-direction:column;
    gap:20px;
}

.product-card{
    display:flex;
    gap:20px;
    align-items:center;
    padding:20px;
    background:#f8fafc;
    border-radius:20px;
    transition:.4s;
}

.product-card:hover{
    transform:translateY(-6px);
    box-shadow:0 25px 50px rgba(0,0,0,.15);
}

.product-card img{
    width:95px;
    height:95px;
    border-radius:16px;
    object-fit:cover;
}

.product-info h4{
    font-size:17px;
    color:#0f172a;
}

.product-info p{
    font-size:14px;
    color:#64748b;
}

.product-price{
    margin-left:auto;
    text-align:right;
}

.product-price span{
    font-size:14px;
    color:#64748b;
}

.product-price strong{
    display:block;
    font-size:20px;
    color:#1e293b;
}

/* ===== SUMMARY ===== */
.order-summary{
    background:linear-gradient(135deg,#eef2ff,#ffffff);
    margin:30px;
    padding:30px;
    border-radius:22px;
}

.summary-row{
    display:flex;
    justify-content:space-between;
    margin-bottom:14px;
    font-size:15px;
}

.summary-row.total{
    font-size:24px;
    font-weight:700;
    border-top:1px dashed #94a3b8;
    padding-top:18px;
}

/* ===== STATUS ===== */
.order-status{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:25px 35px;
    background:#f1f5f9;
}

.status{
    padding:10px 26px;
    border-radius:30px;
    font-size:14px;
    font-weight:600;
}

.status.pending{
    background:#fff7ed;
    color:#c2410c;
}

.status.success{
    background:#dcfce7;
    color:#166534;
}

.payment{
    font-size:15px;
}

#payment_type{
    background:linear-gradient(135deg,#22c55e,#16a34a);
    color:#fff;
    padding:6px 16px;
    border-radius:20px;
    margin-left:6px;
}

/* ===== RESPONSIVE ===== */
@media(max-width:768px){
    .order-header{
        grid-template-columns:1fr;
        gap:10px;
    }
    .tracker{
        flex-direction:column;
    }
    .line{display:none;}
    .product-card{
        flex-direction:column;
        align-items:flex-start;
    }
    .product-price{
        margin-left:0;
        text-align:left;
    }
}
</style>
</head>

<body>

<div class="order-container">

<!-- HEADER -->
<div class="order-header">
    <h2>Order Details</h2>
    <span class="order-id">Order #<%= ord_info[0].order_id %></span>
    <span class="order-id">Date: <%= cos_info[0].order_date %></span>
    <% if(cos_info[0].transaction_id){ %>
    <span class="order-id">Transaction : <%= cos_info[0].transaction_id %></span>
    <% } %>
</div>

<!-- TRACKER -->
<%
let status = cos_info[0].order_status;
let placed = true;
let shipped = (status === 'shipped' || status === 'delivered');
let delivered = (status === 'delivered');
%>

<div class="tracker">
    <div class="step <%= placed ? 'completed' : '' %>">
        <div class="circle">âœ“</div>
        <p>Placed</p>
    </div>

    <div class="line <%= shipped ? 'active' : '' %>"></div>

    <div class="step <%= shipped ? 'completed' : '' %>">
        <div class="circle">ðŸšš</div>
        <p>Shipped</p>
    </div>

    <div class="line <%= delivered ? 'active' : '' %>"></div>

    <div class="step <%= delivered ? 'completed' : '' %>">
        <div class="circle">ðŸ“¦</div>
        <p>Delivered</p>
    </div>
</div>


<!-- CUSTOMER -->
<div class="order-section">
<h3>Customer Information</h3>
<div class="info-grid">
    <p><strong>Name:</strong> <%= cos_info[0].customer_name %></p>
    <p><strong>Mobile:</strong> <%= cos_info[0].customer_mobile %></p>
    <p><strong>Address:</strong>
        <%= cos_info[0].customer_area %>,
        <%= cos_info[0].customer_city %>,
        <%= cos_info[0].customer_district %>,
        <%= cos_info[0].customer_state %>
    </p>
    <p><strong>Pincode:</strong> <%= cos_info[0].customer_pincode %></p>
</div>
</div>

<!-- PRODUCTS -->
<div class="order-section">
<h3>Ordered Products</h3>
<div class="products">
<% var Subtotal=0; %>
<% ord_info.forEach(function(item){ %>
<div class="product-card">
    <img src="/upload/<%= item.product_image1 %>">
    <div class="product-info">
        <h4><%= item.product_name %></h4>
        <p>Qty: <%= item.product_qty %></p>
    </div>
    <div class="product-price">
        <span>â‚¹<%= item.product_price %> Ã— <%= item.product_qty %></span>
        <strong>â‚¹<%= item.product_price * item.product_qty %></strong>
    </div>
</div>
<% Subtotal += item.product_price * item.product_qty; %>
<% }) %>
</div>
</div>

<!-- SUMMARY -->
<div class="order-summary">
<div class="summary-row"><span>Subtotal</span><span>â‚¹<%= Subtotal %></span></div>
<div class="summary-row"><span>Shipping</span><span>â‚¹0</span></div>
<div class="summary-row total"><span>Total</span><span>â‚¹<%= Subtotal %></span></div>
</div>

<!-- STATUS -->
<div class="order-status">
<span class="status pending"><%= cos_info[0].payment_status %></span>
<button onclick="printr()"><i class="fa fa-print"></i> Print</button>
<span class="payment">Payment:
<span id="payment_type"><%= cos_info[0].payment_type %></span>
</span>
</div>

</div>
<script>
    function printr(){
        var data = document.getElementById('print_page').innerHTML;
        document.write(data);
        print();
    }
</script>




<div class="invoice" id="print_page">
<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:Arial, Helvetica, sans-serif;
}

body{
    background:#f4f4f4;
    padding:40px 20px;
}

.invoice{
    max-width:900px;
    margin:auto;
    background:#fff;
    padding:40px;
    border:1px solid #ddd;
}

/* HEADER */
.header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
}

.brand{
    font-size:32px;
    font-weight:700;
    letter-spacing:2px;
}

.order-info{
    text-align:right;
    font-size:15px;
    line-height:1.8;
}

.order-info span{
    color:#777;
}

/* CUSTOMER */
.customer{
    margin-top:30px;
    font-size:15px;
    line-height:1.8;
}

.customer strong{
    color:#555;
}

/* DIVIDER */
.divider{
    border-top:1px solid #ddd;
    margin:35px 0;
}

/* TABLE */
table{
    width:100%;
    border-collapse:collapse;
}

th{
    text-align:left;
    color:#777;
    font-weight:600;
    padding-bottom:15px;
}

td{
    padding:18px 0;
    font-size:15px;
    color:#444;
}

td small{
    display:block;
    color:#888;
    margin-top:6px;
}

.qty, .rate{
    text-align:center;
}

.price{
    text-align:right;
}

/* TOTAL */
.total-row{
    border-top:1px solid #000;
}

.total-row td{
    padding-top:20px;
    font-weight:700;
    font-size:18px;
}

.total-text{
    text-align:center;
    color:#666;
}

/* STATUS */
.status{
    margin-top:20px;
    font-size:14px;
    color:#555;
}

.badge{
    padding:5px 12px;
    border-radius:12px;
    font-size:13px;
    font-weight:600;
}
#print_page{
    display: none;
}

.pending{ background:#fff3cd; color:#856404; }
.placed{ background:#dbeafe; color:#1e40af; }
.shipped{ background:#cffafe; color:#155e75; }
.delivered{ background:#dcfce7; color:#166534; }
</style>
<!-- HEADER -->
<div class="header">
    <div class="brand">ULTRAS</div>

    <div class="order-info">
        <div><strong>Order ID :</strong> <span>#ultras<%= ord_info[0].order_id %></span></div>
        <div><strong>Order Date :</strong> <span><%= cos_info[0].order_date %></span></div>
        <div>
            <strong>Order Status :</strong>
            <span class="badge <%= cos_info[0].order_status %>">
                <%= cos_info[0].order_status %>
            </span>
        </div>
        <% if(cos_info[0].transaction_id){ %>
        <div><strong>Transaction :</strong> <span><%= cos_info[0].transaction_id %></span></div>
        <% } %>
    </div>
</div>

<!-- CUSTOMER -->
<div class="customer">
    <div><strong>First Name :</strong> <%= cos_info[0].customer_name %></div>
    <div><strong>Customer Mobile :</strong> <%= cos_info[0].customer_mobile %></div>
    <div>
        <strong>Address :</strong>
        <%= cos_info[0].customer_area %>,
        <%= cos_info[0].customer_city %>,
        <%= cos_info[0].customer_district %>,
        <%= cos_info[0].customer_state %> -
        <%= cos_info[0].customer_pincode %>
    </div>
</div>

<div class="divider"></div>

<!-- ITEMS TABLE -->
<table>
<thead>
<tr>
    <th>Item Name</th>
    <th class="qty">Quantity</th>
    <th class="rate">Rate</th>
    <th class="price">Total Price</th>
</tr>
</thead>

<tbody>
<% let Subtotal1 = 0; %>
<% ord_info.forEach(function(item){ %>
<tr>
    <td>
        <%= item.product_name %>
        <small>
            <%= item.product_size %>,
            <%= item.product_color %>,
            <%= item.product_company %>
        </small>
    </td>
    <td class="qty"><%= item.product_qty %></td>
    <td class="rate"><%= item.product_price %></td>
    <td class="price"><%= item.product_price * item.product_qty %></td>
</tr>
<% Subtotal1 += item.product_price * item.product_qty; %>
<% }) %>

<!-- TOTAL -->
<tr class="total-row">
    <td colspan="3" class="total-text">Total</td>
    <td class="price">â‚¹ <%= Subtotal1 %></td>
</tr>
</tbody>
</table>

<!-- PAYMENT INFO -->
<div class="status">
    <strong>Payment Method :</strong> <%= cos_info[0].payment_type %>
</div>

</div>



<br><br><br>




<%-include("footer") %>
<%-include("css") %>

<!-- CREATE TABLE a2z50.order_tbl (
    order_id INT AUTO_INCREMENT PRIMARY KEY,

    customer_name VARCHAR(150) ,
    customer_mobile VARCHAR(15) ,

    customer_state VARCHAR(100) ,
    customer_district VARCHAR(100) ,
    customer_city VARCHAR(100) ,
    customer_area VARCHAR(150) ,
    customer_landmark VARCHAR(150),
    customer_pincode VARCHAR(10) ,

    payment_type VARCHAR(20) ,
    order_date TEXT ,
    order_amount INT ,

    payment_status VARCHAR(20),
    order_status VARCHAR(20) ,
    transaction_id VARCHAR(100)
);
-->
